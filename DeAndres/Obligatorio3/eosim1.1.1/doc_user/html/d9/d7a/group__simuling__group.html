<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>EOSimulator: Running Simulations</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
<link href="../../tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.2 -->
<div class="tabs">
  <ul>
    <li><a href="../../index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="../../modules.html"><span>Modules</span></a></li>
    <li><a href="../../annotated.html"><span>Classes</span></a></li>
    <li><a href="../../pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul>
</div>
<h1>Running Simulations</h1><hr><a name="_details"></a><h2>Detailed Description</h2>
<br>
 <p>
In this module we will learn how to simulate a model using the facilities provided by the library. Besides, we will describe the errors detected by EOSimulator. <h3>Running a simulation</h3>
<p>
The process of simulate models is not as trivial as it appears. It is very important to design set of runs varying seeds in those streams used by the model. Otherwise all the experimentation done with the model will not be statistically valid. Remember, one simulation run is not enough to draw any conclusions about a system. Luckily, EOSimulator makes this running process quite easy. The core::Experiment class handles the execution of a simulation. It contains a calendar, an executive and the streams. <h4>Making one run</h4>
<p>
To run a simulation you have to write a program. In this program, create an instance of your system model and an experiment. Then connect them with the operation core::Model::connectToExp. In that operation, the model is initialized (with the operation core::Model::init) and connected to the experiment. Then use Experiment::run to run the simulation. This operation makes the initial schedules in the model (core::Model::doInitialSchedules) and simulates the model. For example: <br>
 <br>
 <code class="fragment"> using namespace eosim::core; <br>
 int main () {<br>
 &nbsp;&nbsp;&nbsp;&nbsp; Model my_model;<br>
 &nbsp;&nbsp;&nbsp;&nbsp; Experiment exp;<br>
 &nbsp;&nbsp;&nbsp;&nbsp; m.connectToExp(e); <code class="comment">// the experiment is connected to the model</code><br>
 &nbsp;&nbsp;&nbsp;&nbsp; e.run(5); <code class="comment">// we simulate for 5 time units</code><br>
 &nbsp;&nbsp;&nbsp;&nbsp; <code class="comment">// do some report</code><br>
 }</code> <br>
 <p>
After the simulation is finished generally the data collected is reported. For more information see <a class="el" href="../../dc/db5/group__statics__group.html">Data Collectors</a>. <h4>Making multiple runs</h4>
<p>
As we said above, one run is not enough to draw conclusions. So in order to make more runs, after the simulation is finished, create a new model and experiment. Then connect them and set a new seed in the experiment using core::Experiment::setSeed. This operation change the seed of every registered distribution in the model, and it let you have a different run (the default seed is 251182). Finally, run the simulation (core::Experiment::run). <br>
 <br>
 <code class="fragment"> using namespace eosim::core; <br>
 int main () {<br>
 &nbsp;&nbsp;&nbsp;&nbsp; for(int i = 0; i &lt; 4; i++) { <code class="comment">// we will make 4 runs</code><br>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Model my_model; <code class="comment">// a new Model is created for every iteration</code><br>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Experiment exp; <code class="comment">// a new Experiment is created for every iteration</code><br>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; m.connectToExp(e); <code class="comment">// the experiment is connected to the model</code><br>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; e.run(5); <code class="comment">// we simulate for 5 time units</code><br>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="comment">// do some report</code><br>
 &nbsp;&nbsp;&nbsp;&nbsp; }<br>
 }</code> <br>
 <p>
But why we didn’t keep the old experiment and model? Another possibility may be keep them, set a new seed and simulate again. This is possible because Experiment doesn’t reset the simulation time. Check if the system you are modeling let you do that. <p>
We could create a new model and connect it the old experiment. But, in the old experiment there may be some entities which are scheduled to arrive or to leave the system. If an entity is schedule to leave, it may return some units of bins causing errors in the output or even aborts the simulation. If we make a new experiment and connect it with an old model, the queues of the model will full of entities. In this case the model has already started (and if it can reach steady state) it may be stable. But, the clocks of the entities waiting in a queue have not been updated , so they still contain older values and cause errors collecting waiting times. 
<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d61/classeosim_1_1core_1_1_b_calendar.html">eosim::core::BCalendar</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">B Events Calendar.  <a href="../../dc/d61/classeosim_1_1core_1_1_b_calendar.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd5/classeosim_1_1core_1_1_c_calendar.html">eosim::core::CCalendar</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">C Events Calendar.  <a href="../../d4/dd5/classeosim_1_1core_1_1_c_calendar.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/dc7/classeosim_1_1core_1_1_experiment.html">eosim::core::Experiment</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><a class="el" href="../../d5/dc7/classeosim_1_1core_1_1_experiment.html" title="Experiment Manager.">Experiment</a> Manager.  <a href="../../d5/dc7/classeosim_1_1core_1_1_experiment.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d5d/classeosim_1_1core_1_1_model.html">eosim::core::Model</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">System <a class="el" href="../../d7/d5d/classeosim_1_1core_1_1_model.html" title="System Model.">Model</a>.  <a href="../../d7/d5d/classeosim_1_1core_1_1_model.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d3f/classeosim_1_1dist_1_1_dist_manager.html">eosim::dist::DistManager</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><a class="el" href="../../d0/dad/classeosim_1_1dist_1_1_distribution.html" title="Distribution abstract class.">Distribution</a> Manager.  <a href="../../d9/d3f/classeosim_1_1dist_1_1_dist_manager.html#_details">More...</a><br></td></tr>
</table>
<hr size="1"><address style="text-align: right;"><small>Generated on Tue Aug 11 15:46:29 2009 for EOSimulator by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.2 </small></address>
</body>
</html>
